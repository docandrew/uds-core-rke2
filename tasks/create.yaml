tasks:
  - name: create-zarf-packages
    description: Create child Zarf packages
    actions:
      - description: "Create the exemptions Zarf package"
        cmd: uds zarf package create packages/exemptions --confirm --no-progress -o build/
      - description: "Create the MetalLB Zarf package"
        cmd: uds zarf package create packages/metallb --confirm --no-progress -o build/

  - name: create-uds-bundle
    description: Create the UDS Core bundle
    actions:
      # Run dependent task to create Zarf packages first.
      - task: create-zarf-packages

      - description: "Create the UDS Core RKE2 Bundle"
        cmd: "uds create bundles/ --confirm --no-progress --architecture=${ZARF_ARCHITECTURE}"
